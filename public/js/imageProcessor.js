// Generated by CoffeeScript 1.7.1
(function() {
  var canvas_height, canvas_width, current_element, hammertime, img_height, img_width;

  img_width = $(".image").get(0).naturalWidth;

  img_height = $(".image").get(0).naturalHeight;

  canvas_width = $(".image").width();

  canvas_height = $(".image").height();

  $('input[type="checkbox"],[type="radio"]').not('#create-switch').bootstrapSwitch();

  $('.blur-radius').slider();

  $('.tilt-shift-button').click(function() {
    var gradient_center_top, img, radius;
    img = $('.image').get(0);
    radius = $('.blur-radius').slider('getValue');
    gradient_center_top = ($(".tilt-center").position().top + 25) / canvas_height * img_height;
    Caman(img, function() {
      this.myTiltShift(radius, gradient_center_top);
      this.render();
    });
  });

  $('.revert-button').click(function() {
    var img;
    img = $('.image').get(0);
    Caman(img, function() {
      this.revert(true);
    });
  });

  $(".tilt-center").css({
    left: canvas_width / 2 - 25,
    top: canvas_height / 2 - 25
  });

  current_element = void 0;

  hammertime = $("body").hammer();

  hammertime.on("dragstart", ".tilt-center", function(event) {
    current_element = $(".tilt-center");
  });

  hammertime.on("drag", ".tilt-overlay", function(event) {
    var center, y_pos;
    if (current_element === void 0) {
      return;
    }
    center = event.gesture.center;
    if (center.pageX > $(".image").offset().left && center.pageY > $(".image").offset().top && center.pageX < $(".image").offset().left + canvas_width && center.pageY < $(".image").offset().top + canvas_height) {
      y_pos = center.pageY - 25 - $(".image").offset().top;
      current_element.css({
        top: y_pos
      });
    }
    return event.gesture.preventDefault();
  });

  hammertime.on("dragend", ".tilt-overlay", function(event) {
    return current_element = void 0;
  });

}).call(this);
